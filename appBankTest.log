2023-11-23 11:42:42,426 INFO  [main] de.telran.bankapp.controller.AccountControllerTest : Starting AccountControllerTest using Java 19.0.2 with PID 5132 (started by natal in D:\Natalia\TelRan\TestH2\BankApp)
2023-11-23 11:42:42,444 INFO  [main] de.telran.bankapp.controller.AccountControllerTest : No active profile set, falling back to 1 default profile: "default"
2023-11-23 11:42:44,320 INFO  [main] org.springframework.data.repository.config.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
2023-11-23 11:42:44,322 INFO  [main] org.springframework.data.repository.config.RepositoryConfigurationDelegate : Bootstrapping Spring Data JDBC repositories in DEFAULT mode.
2023-11-23 11:42:44,366 INFO  [main] org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport : Spring Data JDBC - Could not safely identify store assignment for repository candidate interface de.telran.bankapp.repository.AccountRepository; If you want this repository to be a JDBC repository, consider annotating your entities with one of these annotations: org.springframework.data.relational.core.mapping.Table.
2023-11-23 11:42:44,367 INFO  [main] org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport : Spring Data JDBC - Could not safely identify store assignment for repository candidate interface de.telran.bankapp.repository.AgreementRepository; If you want this repository to be a JDBC repository, consider annotating your entities with one of these annotations: org.springframework.data.relational.core.mapping.Table.
2023-11-23 11:42:44,368 INFO  [main] org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport : Spring Data JDBC - Could not safely identify store assignment for repository candidate interface de.telran.bankapp.repository.ClientRepository; If you want this repository to be a JDBC repository, consider annotating your entities with one of these annotations: org.springframework.data.relational.core.mapping.Table.
2023-11-23 11:42:44,369 INFO  [main] org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport : Spring Data JDBC - Could not safely identify store assignment for repository candidate interface de.telran.bankapp.repository.ManagerRepository; If you want this repository to be a JDBC repository, consider annotating your entities with one of these annotations: org.springframework.data.relational.core.mapping.Table.
2023-11-23 11:42:44,370 INFO  [main] org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport : Spring Data JDBC - Could not safely identify store assignment for repository candidate interface de.telran.bankapp.repository.ProductRepository; If you want this repository to be a JDBC repository, consider annotating your entities with one of these annotations: org.springframework.data.relational.core.mapping.Table.
2023-11-23 11:42:44,371 INFO  [main] org.springframework.data.repository.config.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 42 ms. Found 0 JDBC repository interfaces.
2023-11-23 11:42:44,383 INFO  [main] org.springframework.data.repository.config.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
2023-11-23 11:42:44,384 INFO  [main] org.springframework.data.repository.config.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-11-23 11:42:44,436 INFO  [main] org.springframework.data.repository.config.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 48 ms. Found 5 JPA repository interfaces.
2023-11-23 11:42:45,396 INFO  [main] org.hibernate.jpa.internal.util.LogHelper : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-11-23 11:42:45,467 INFO  [main] org.hibernate.Version : HHH000412: Hibernate ORM core version 6.2.7.Final
2023-11-23 11:42:45,469 INFO  [main] org.hibernate.cfg.Environment : HHH000406: Using bytecode reflection optimizer
2023-11-23 11:42:45,688 INFO  [main] org.hibernate.bytecode.internal.BytecodeProviderInitiator : HHH000021: Bytecode provider name : bytebuddy
2023-11-23 11:42:45,824 INFO  [main] org.springframework.orm.jpa.persistenceunit.SpringPersistenceUnitInfo : No LoadTimeWeaver setup: ignoring JPA class transformer
2023-11-23 11:42:45,840 INFO  [main] com.zaxxer.hikari.HikariDataSource : HikariPool-1 - Starting...
2023-11-23 11:42:46,259 INFO  [main] com.zaxxer.hikari.pool.HikariPool : HikariPool-1 - Added connection conn1: url=jdbc:h2:file:/data/bank_test user=SA
2023-11-23 11:42:46,260 INFO  [main] com.zaxxer.hikari.HikariDataSource : HikariPool-1 - Start completed.
2023-11-23 11:42:46,555 INFO  [main] org.hibernate.bytecode.internal.BytecodeProviderInitiator : HHH000021: Bytecode provider name : bytebuddy
2023-11-23 11:42:47,460 INFO  [main] org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-11-23 11:42:47,462 INFO  [main] org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-11-23 11:42:48,863 INFO  [main] org.springframework.data.jpa.repository.query.QueryEnhancerFactory : Hibernate is in classpath; If applicable, HQL parser will be used.
2023-11-23 11:42:51,024 WARN  [main] org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-11-23 11:42:51,634 INFO  [main] org.springframework.security.web.DefaultSecurityFilterChain : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@7d893815, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@75600bdb, org.springframework.security.web.context.SecurityContextHolderFilter@693e254e, org.springframework.security.web.header.HeaderWriterFilter@22b0c1cf, org.springframework.security.web.authentication.logout.LogoutFilter@61e33118, de.telran.bankapp.security.JwtAuthorisationFilter@5c5e301f, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@109a4e10, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@23b085ab, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@7bf56370, org.springframework.security.web.session.SessionManagementFilter@386dd761, org.springframework.security.web.access.ExceptionTranslationFilter@28bbac99, org.springframework.security.web.access.intercept.AuthorizationFilter@b70ad7a]
2023-11-23 11:42:53,242 INFO  [main] org.springframework.boot.autoconfigure.h2.H2ConsoleAutoConfiguration : H2 console available at '/h2-console'. Database available at 'jdbc:h2:file:/data/bank_test'
2023-11-23 11:42:53,400 INFO  [main] org.springframework.boot.test.mock.web.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2023-11-23 11:42:53,401 INFO  [main] org.springframework.test.web.servlet.TestDispatcherServlet : Initializing Servlet ''
2023-11-23 11:42:53,403 INFO  [main] org.springframework.test.web.servlet.TestDispatcherServlet : Completed initialization in 1 ms
2023-11-23 11:42:53,482 INFO  [main] de.telran.bankapp.controller.AccountControllerTest : Started AccountControllerTest in 11.541 seconds (process running for 21.545)
2023-11-23 11:42:54,342 INFO  [main] de.telran.bankapp.aspect.LoggingAspect : 
NEW REQUEST:
IP : 127.0.0.1
URL : http://localhost/accounts/FOR_DELETION
HTTP_METHOD : GET
CONTROLLER_METHOD : de.telran.bankapp.controller.AccountController.getAccountsByStatus
2023-11-23 11:42:54,343 INFO  [main] de.telran.bankapp.aspect.LoggingAspect : RUN SERVICE:
SERVICE_METHOD : de.telran.bankapp.service.implementations.AccountServiceImpl.getAccountsByStatus
2023-11-23 11:42:54,363 INFO  [main] de.telran.bankapp.aspect.LoggingAspect : 
Return value: <200 OK OK,[],[]>
END OF REQUEST
2023-11-23 11:42:54,422 INFO  [main] de.telran.bankapp.aspect.LoggingAspect : 
NEW REQUEST:
IP : 127.0.0.1
URL : http://localhost/accounts/delete-accounts-without-transactions-and-created-earlier-than
HTTP_METHOD : DELETE
CONTROLLER_METHOD : de.telran.bankapp.controller.AccountController.markForDeletionAccountsWithoutTransactionsAndCreatedEarlierThan
2023-11-23 11:42:54,426 INFO  [main] de.telran.bankapp.aspect.LoggingAspect : RUN SERVICE:
SERVICE_METHOD : de.telran.bankapp.service.implementations.AccountServiceImpl.markForDeletionAccountsWithoutTransactionsAndCreatedEarlierThan
2023-11-23 11:42:54,473 INFO  [main] de.telran.bankapp.aspect.LoggingAspect : 
Return value: <200 OK OK,[ClientDto(id=523e4567-e89b-12d3-a456-030000000001, firstName=Lukas, lastName=Muller, email=regular@gmail.com, address=Lansstrasse 81, D-11179 Berlin, Germany, phone=+49 30 5684962), ClientDto(id=523e4567-e89b-12d3-a456-030000000003, firstName=Lena, lastName=Weber, email=lena.weber@yahoo.de, address=Hauptstrasse 25, D-50667 Koln, Germany, phone=+49 221 9876543)],[]>
END OF REQUEST
2023-11-23 11:42:54,505 INFO  [main] de.telran.bankapp.aspect.LoggingAspect : 
NEW REQUEST:
IP : 127.0.0.1
URL : http://localhost/accounts/FOR_DELETION
HTTP_METHOD : GET
CONTROLLER_METHOD : de.telran.bankapp.controller.AccountController.getAccountsByStatus
2023-11-23 11:42:54,506 INFO  [main] de.telran.bankapp.aspect.LoggingAspect : RUN SERVICE:
SERVICE_METHOD : de.telran.bankapp.service.implementations.AccountServiceImpl.getAccountsByStatus
2023-11-23 11:42:54,510 INFO  [main] de.telran.bankapp.aspect.LoggingAspect : 
Return value: <200 OK OK,[AccountDto(id=523e4567-e89b-12d3-a456-040000000003, client=ClientDto(id=523e4567-e89b-12d3-a456-030000000001, firstName=Lukas, lastName=Muller, email=regular@gmail.com, address=Lansstrasse 81, D-11179 Berlin, Germany, phone=+49 30 5684962), name=DE71 5123 0800 0000 6830 99, type=CURRENT, status=FOR_DELETION, balance=0.00, currencyCode=EUR, createdAt=2022-08-06T10:35:00, updatedAt=2022-08-06T10:35:00), AccountDto(id=523e4567-e89b-12d3-a456-040000000006, client=ClientDto(id=523e4567-e89b-12d3-a456-030000000003, firstName=Lena, lastName=Weber, email=lena.weber@yahoo.de, address=Hauptstrasse 25, D-50667 Koln, Germany, phone=+49 221 9876543), name=DE98 5001 0517 5407 3249 31, type=CURRENT, status=FOR_DELETION, balance=0.00, currencyCode=EUR, createdAt=2022-12-06T10:35:00, updatedAt=2022-12-06T10:35:00)],[]>
END OF REQUEST
2023-11-23 11:42:54,585 INFO  [main] de.telran.bankapp.aspect.LoggingAspect : 
NEW REQUEST:
IP : 127.0.0.1
URL : http://localhost/accounts
HTTP_METHOD : GET
CONTROLLER_METHOD : de.telran.bankapp.controller.AccountController.getAllAccounts
2023-11-23 11:42:54,585 INFO  [main] de.telran.bankapp.aspect.LoggingAspect : RUN SERVICE:
SERVICE_METHOD : de.telran.bankapp.service.implementations.AccountServiceImpl.getAllAccounts
2023-11-23 11:42:54,597 INFO  [main] de.telran.bankapp.aspect.LoggingAspect : 
Return value: <200 OK OK,[AccountDto(id=523e4567-e89b-12d3-a456-040000000001, client=ClientDto(id=523e4567-e89b-12d3-a456-030000000001, firstName=Lukas, lastName=Muller, email=regular@gmail.com, address=Lansstrasse 81, D-11179 Berlin, Germany, phone=+49 30 5684962), name=DE89 3704 0044 0532 0130 00, type=CURRENT, status=ACTIVE, balance=5247.27, currencyCode=EUR, createdAt=2023-01-20T10:35:00, updatedAt=2023-10-05T12:02:00), AccountDto(id=523e4567-e89b-12d3-a456-040000000002, client=ClientDto(id=523e4567-e89b-12d3-a456-030000000001, firstName=Lukas, lastName=Muller, email=regular@gmail.com, address=Lansstrasse 81, D-11179 Berlin, Germany, phone=+49 30 5684962), name=DE12 1001 1001 2620 6568 90, type=CURRENT, status=ACTIVE, balance=2503.50, currencyCode=EUR, createdAt=2023-04-17T10:35:00, updatedAt=2023-10-05T12:02:00), AccountDto(id=523e4567-e89b-12d3-a456-040000000003, client=ClientDto(id=523e4567-e89b-12d3-a456-030000000001, firstName=Lukas, lastName=Muller, email=regular@gmail.com, address=Lansstrasse 81, D-11179 Berlin, Germany, phone=+49 30 5684962), name=DE71 5123 0800 0000 6830 99, type=CURRENT, status=ACTIVE, balance=0.00, currencyCode=EUR, createdAt=2022-08-06T10:35:00, updatedAt=2022-08-06T10:35:00), AccountDto(id=523e4567-e89b-12d3-a456-040000000004, client=ClientDto(id=523e4567-e89b-12d3-a456-030000000002, firstName=Markus, lastName=Schmidt, email=markus.schmidt@gmx.de, address=Musterstrasse 17, D-80331 Munchen, Germany, phone=+49 89 1234567), name=DE33 2004 1144 0199 9999 00, type=DEPOSIT, status=ACTIVE, balance=250000.00, currencyCode=EUR, createdAt=2023-07-25T10:35:00, updatedAt=2023-08-08T14:23:00), AccountDto(id=523e4567-e89b-12d3-a456-040000000005, client=ClientDto(id=523e4567-e89b-12d3-a456-030000000003, firstName=Lena, lastName=Weber, email=lena.weber@yahoo.de, address=Hauptstrasse 25, D-50667 Koln, Germany, phone=+49 221 9876543), name=DE45 7002 0270 0015 7695 53, type=CURRENT, status=ACTIVE, balance=153256.00, currencyCode=EUR, createdAt=2022-11-25T10:35:00, updatedAt=2023-03-20T10:35:00), AccountDto(id=523e4567-e89b-12d3-a456-040000000006, client=ClientDto(id=523e4567-e89b-12d3-a456-030000000003, firstName=Lena, lastName=Weber, email=lena.weber@yahoo.de, address=Hauptstrasse 25, D-50667 Koln, Germany, phone=+49 221 9876543), name=DE98 5001 0517 5407 3249 31, type=CURRENT, status=ACTIVE, balance=0.00, currencyCode=EUR, createdAt=2022-12-06T10:35:00, updatedAt=2022-12-06T10:35:00), AccountDto(id=523e4567-e89b-12d3-a456-040000000007, client=ClientDto(id=523e4567-e89b-12d3-a456-030000000004, firstName=Sara, lastName=Fischer, email=sara.fischer@outlook.de, address=Schillerstrasse 12, D-70173 Stuttgart, Germany, phone=+49 711 4567890), name=DE16 3706 0193 6001 2345 67, type=CURRENT, status=ACTIVE, balance=5151.15, currencyCode=EUR, createdAt=2023-02-14T10:35:00, updatedAt=2023-08-08T14:23:00)],[]>
END OF REQUEST
2023-11-23 11:42:54,608 INFO  [SpringApplicationShutdownHook] org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-11-23 11:42:54,610 INFO  [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource : HikariPool-1 - Shutdown initiated...
2023-11-23 11:42:54,611 INFO  [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource : HikariPool-1 - Shutdown completed.
